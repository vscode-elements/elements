<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Form Demo</title>
  <link rel="stylesheet" href="../dev-assets/default-webview-styles.css" />
  <link rel="stylesheet" href="../node_modules/@vscode/codicons/dist/codicon.css" id="vscode-codicon-stylesheet" />
  <script type="module" src="../dev-assets/component-preview.js"></script>
  <script type="module" src="../dist/vscode-tabs/index.js"></script>
  <script type="module" src="../dist/vscode-form-container/index.js"></script>
  <script type="module" src="../dist/vscode-form-group/index.js"></script>
  <script type="module" src="../dist/vscode-single-select/index.js"></script>
  <script type="module" src="../dist/vscode-multi-select/index.js"></script>
  <script type="module" src="../dist/vscode-option/index.js"></script>
  <script type="module" src="../dist/vscode-radio/index.js"></script>
  <script type="module" src="../dist/vscode-radio-group/index.js"></script>
  <script type="module" src="../dist/vscode-checkbox/index.js"></script>
  <script type="module" src="../dist/vscode-checkbox-group/index.js"></script>
  <script type="module" src="../dist/vscode-form-helper/index.js"></script>
  <script type="module" src="../dist/vscode-inputbox/index.js"></script>
  <script type="module" src="../dist/vscode-label/index.js"></script>
  <script type="module" src="../dist/vscode-textarea/index.js"></script>
  <script type="module" src="../dist/vscode-textfield/index.js"></script>
  <style>
    input:invalid,
    select:invalid,
    textarea:invalid {
      box-shadow: 0 0 2px 1px red;
    }

    vscode-label:not(:defined) {
      display: block;
      height: 26px;
      margin-right: 14px;
      width: 150px;
    }

    vscode-form-group:not(:defined) {
      display: block;
      margin: 15px 0;
    }

    vscode-textfield:not(:defined),
    vscode-single-select:not(:defined),
    vscode-multi-select:not(:defined) {
      height: 26px;
    }
  </style>
  <script>
    const __DEMO__ = {
      formSubmitEnabled: false,
    };
  </script>
</head>

<body>
  <div class="story">
    <h2 class="story-title">Native form</h2>
    <div class="story-content">
      <form action="/" enctype="application/x-www-form-urlencoded" method="get" id="form-native">
        <fieldset>
          <div>
            <label for="range-test">Range test</label>
            <input type="range" name="range-test" id="range-test" required>
          </div>
          <div>
            <label for="required-test">Required test</label>
            <input type="text" name="required-test" id="required-test" required value="foo">
          </div>
          <div>
            <label for="pattern-test">Pattern test</label>
            <input type="text" name="pattern-test" id="pattern-test" pattern="[Bb]anana|[Cc]herry"
              placeholder="banana or cherry">
          </div>
          <div>
            <label for="required-textarea-test">Required textarea test</label>
            <textarea name="required-textarea-test" id="required-textarea-test" minlength="100">foo</textarea>
          </div>
          <div>
            <label for="select-required-test">Required test</label>
            <select name="select-required-test" id="select-required-test" required>
              <option value="">---</option>
              <option value="1">One</option>
              <option value="2" selected>Two</option>
              <option value="3">Three</option>
            </select>
          </div>
          <div>
            <label for="select-multiple-required-test">Required test</label>
            <select name="select-multiple-required-test[]" id="select-multiple-required-test" required multiple>
              <option value="">---</option>
              <option value="1" selected>One</option>
              <option value="2" selected>Two</option>
              <option value="3">Three</option>
            </select>
          </div>
          <div>
            <input type="checkbox" id="checkbox-required" name="checkbox-required" value="Required example" required>
            <label for="checkbox-required">Required checkbox with value</label>
          </div>
          <div>
            <input type="checkbox" id="checkbox-empty" name="checkbox-empty" checked>
            <label for="checkbox-empty">Checkbox without value</label>
          </div>
          <div>
            <input type="radio" value="1" id="radio-group-1-button-1" name="radio-group-1" required>
            <label for="radio-group-1-button-1">One</label>
          </div>
          <div>
            <input type="radio" value="2" id="radio-group-1-button-2" name="radio-group-1">
            <label for="radio-group-1-button-2">Two</label>
          </div>
          <div>
            <input type="radio" value="3" id="radio-group-1-button-3" name="radio-group-1">
            <label for="radio-group-1-button-3">Three</label>
          </div>
        </fieldset>
        <button type="submit" name="submit-button">Submit</button>
        <button type="reset" name="reset-button">Reset</button>
      </form>
      <form action="/" enctype="multipart/form-data" method="post">
        <label for="native-file-input">File input</label>
        <input type="file" id="native-file-input" name="native-file-input" multiple>
        <button type="submit">Submit</button>
      </form>
    </div>
  </div>
  <div class="story">
    <h2 class="story-title">VSC Form</h2>
    <div class="story-content">
      <component-preview>
        <form action="/" enctype="application/x-www-form-urlencoded" method="get" id="vsc-form">
          <fieldset>
            <vscode-form-group>
              <vscode-label for="vsc-required-test">Required test</vscode-label>
              <vscode-textfield name="vsc-required-test" id="vsc-required-test" required
                default-value="Lorem"></vscode-textfield>
            </vscode-form-group>
            <vscode-form-group>
              <vscode-label for="vsc-pattern-test">Pattern test</vscode-label>
              <vscode-textfield name="vsc-pattern-test" id="vsc-pattern-test" pattern="[Bb]anana|[Cc]herry" required
                placeholder="banana or cherry" default-value="banana"></vscode-textfield>
            </vscode-form-group>
            <vscode-form-group>
              <vscode-label for="vsc-textarea-test">Required textarea test</vscode-label>
              <vscode-textarea id="vsc-textarea-test" required default-value="default value"
                name="vsc-textarea-test"></vscode-textarea>
            </vscode-form-group>
            <vscode-form-group>
              <vscode-label for="vsc-required-select-test">Required test</vscode-label>
              <vscode-single-select id="vsc-required-select-test" name="vsc-required-select-test" required value="3">
                <vscode-option value="">---</vscode-option>
                <vscode-option value="1">One</vscode-option>
                <vscode-option value="2" selected>Two</vscode-option>
                <vscode-option value="3" selected>Three</vscode-option>
              </vscode-single-select>
            </vscode-form-group>
            <vscode-form-group>
              <vscode-label for="vsc-select-multiple-required">Required multiple test</vscode-label>
              <vscode-multi-select id="vsc-select-multiple-required" name="vsc-select-multiple-required[]"
                default-value="[&quot;1&quot;,&quot;2&quot;]" required>
                <vscode-option value="">---</vscode-option>
                <vscode-option value="1">One</vscode-option>
                <vscode-option value="2">Two</vscode-option>
                <vscode-option value="3">Three</vscode-option>
              </vscode-multi-select>
            </vscode-form-group>
            <vscode-form-group>
              <vscode-checkbox-group variant="vertical">
                <vscode-checkbox label="Required checkbox with value" name="vsc-checkbox-required"
                  value="Required checked" required default-checked></vscode-checkbox>
                <vscode-checkbox label="Checkbox without value" name="vsc-checkbox-empty"></vscode-checkbox>
              </vscode-checkbox-group>
            </vscode-form-group>
            <vscode-form-group>
              <vscode-radio-group variant="vertical">
                <vscode-radio name="radio-group-vsc" label="One" value="1"></vscode-radio>
                <vscode-radio name="radio-group-vsc" label="Two" value="2" required></vscode-radio>
                <vscode-radio name="radio-group-vsc" label="Three" value="3"></vscode-radio>
              </vscode-radio-group>
            </vscode-form-group>
            <vscode-form-group>
              <vscode-button type="submit" name="submit-button-vsc" value="Submit Button VSC">Submit</vscode-button>
              <vscode-button secondary type="reset">Reset</vscode-button>
            </vscode-form-group>
            <button type="submit" name="submit-button">Submit</button>
            <button type="reset">Reset</button>
          </fieldset>
        </form>
        <script type="module">
          const nativeForm = document.getElementById('form-native');
          nativeForm.addEventListener('submit', (ev) => {
            if (!__DEMO__.formSubmitEnabled) {
              ev.preventDefault();
            }

            const data = new FormData(nativeForm);

            console.group('native form');

            for (const entry of data.entries()) {
              console.log(`${entry[0]}: ${entry[1]}`);
            }

            console.groupEnd();
          });

          const vscForm = document.getElementById('vsc-form');
          vscForm.addEventListener('submit', (ev) => {
            if (!__DEMO__.formSubmitEnabled) {
              ev.preventDefault();
            }

            const data = new FormData(vscForm);

            console.group('vsc form');

            for (const entry of data.entries()) {
              console.log(`${entry[0]}: ${entry[1]}`);
            }

            console.groupEnd();
          });

          const vscTextfield = document.getElementById('vsc-required-test');
          vscForm.addEventListener('invalid', (ev) => {
            console.log(ev);
          });

          const tf = document.getElementById('vsc-required-test');
          tf.addEventListener('input', (ev) => {
            console.log(ev);
          });
        </script>
        <form action="/" enctype="multipart/form-data" method="post">
          <vscode-form-group>
            <vscode-label for="vsc-file-input-test">File input test</vscode-label>
            <vscode-textfield id="vsc-file-input-test" name="vsc-file-input-test" type="file"></vscode-textfield>
          </vscode-form-group>
          <vscode-button type="submit">Submit</vscode-button>
        </form>
      </component-preview>
    </div>
  </div>
  <div style="margin: 30px 0;">
    <button type="button" id="bt-toggle-disabled">Disable</button>
    <button type="button" id="bt-toggle-form-submit">Submit: disabled</button>
    <script type="module">
      const btToggleDisabled = document.getElementById('bt-toggle-disabled');
      const btToggleFormSubmit = document.getElementById('bt-toggle-form-submit');
      let disabled = false;

      btToggleDisabled.addEventListener('click', () => {
        disabled = !disabled;

        btToggleDisabled.innerText = disabled ? 'Enable' : 'Disable';

        document.querySelectorAll('fieldset').forEach((f) => {
          f.disabled = disabled;
        });
      });

      btToggleFormSubmit.addEventListener('click', () => {
        __DEMO__.formSubmitEnabled = !__DEMO__.formSubmitEnabled;

        btToggleFormSubmit.innerText = __DEMO__.formSubmitEnabled ? 'Submit: enabled' : 'Submit: disabled';
      });
    </script>
  </div>
</body>

</html>
